"use client";
import { useEffect, useState } from "react";
import { PixelGrid } from "@/components/PixelGrid/PixelGrid";
import { ColorPicker } from "@/components/ColorPicker/ColorPicker";
import { SizeSelector } from "@/components/SizeSelector/SizeSelector";
import styles from "./page.module.css";

export default function Home() {
  const [currentColor, setCurrentColor] = useState("");
  const [selectedSize, setSelectedSize] = useState<string | undefined>(
    undefined
  );

  useEffect(() => {
    if (typeof window === "undefined") return;

    const storedSize = window.localStorage.getItem("storedSize");

    if (!storedSize) {
      setSelectedSize("medium");
      window.localStorage.setItem("storedSize", "medium");
      return;
    }

    setSelectedSize(storedSize);
  }, [selectedSize]);

  return (
    <div className={styles.page}>
      <main className={styles.main}>
        <div className={styles.header}>
          <svg
            width="117"
            height="12"
            viewBox="0 0 117 12"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className={styles.logo}
          >
            <path d="M0 12V0.799999H6.648L8.296 2.448V6.856L6.496 8.656H2.264V12H0ZM1 11.136H1.224V7.6H6.032L7.328 6.304V2.944L6.176 1.792H1V11.136ZM2.264 6.392H5.392L6.04 5.752V3.552L5.552 3.064H2.264V6.392ZM1.224 7.376V2.016H6.096L7.104 3.008V6.24L5.952 7.376H1.224ZM10.9585 2.104V-9.53674e-07H13.5345V2.104H10.9585ZM12.1345 1.184H12.3585V0.799999H12.1345V1.184ZM9.1425 12V9.736H11.2785V5.624H9.1425V3.36H13.5345V9.736H15.6705V12H9.1425ZM10.1505 10.992H14.6705V10.768H12.4385V4.352H10.1505V4.576H12.2145V10.768H10.1505V10.992ZM16.1081 12V9.08L17.5641 7.616L16.1081 6.176V3.36H18.3721V5.224L19.6361 6.496H20.8361L22.1001 5.224V3.36H24.3641V6.176L22.9161 7.616L24.3641 9.08V12H22.1001V10.024L20.8361 8.76H19.6361L18.3721 10.024V12H16.1081ZM17.1401 10.992H17.3641V9.68L19.2681 7.728H21.2041L23.1081 9.68V10.992H23.3321V9.616L21.4121 7.632L23.3321 5.712V4.368H23.1081V5.648L21.2361 7.504H19.2361L17.3641 5.648V4.368H17.1401V5.712L19.0601 7.632L17.1401 9.616V10.992ZM31.9398 3.36L33.5878 5.008V7.288L31.9398 8.936H27.5878V9.248L28.0758 9.736H33.4758V12H26.9718L25.3238 10.352V5.008L26.9718 3.36H31.9398ZM31.3078 4.592L32.3318 5.6V6.808L31.4038 7.736H26.4758V5.68L27.5798 4.592H31.3078ZM31.3878 4.368H27.4998L26.2518 5.616V9.808L27.4358 10.992H32.3958V10.768H27.5158L26.4758 9.744V7.96H31.4678L32.5558 6.888V5.536L31.3878 4.368ZM30.8358 5.624H28.0758L27.5878 6.112V6.752H30.9958L31.3318 6.416V6.112L30.8358 5.624ZM34.035 12V9.736H36.195V2.264H34.035V-9.53674e-07H38.451V9.736H40.611V12H34.035ZM35.043 10.992H39.611V10.768H37.395V0.992H35.043V1.216H37.171V10.768H35.043V10.992ZM44.6981 12V2.448L46.3461 0.799999H51.5141L53.1621 2.448V12H50.9061V8.704H46.9541V12H44.6981ZM45.7541 10.896H45.9781V7.712H51.9221V10.896H52.1461V2.904L50.9941 1.752H46.9061L45.7541 2.904V10.896ZM46.9541 6.448H50.9061V3.552L50.4181 3.064H47.4421L46.9541 3.552V6.448ZM45.9781 7.488V2.968L46.9861 1.976H50.9141L51.9221 2.968V7.488H45.9781ZM54.155 12V9.744H55.707V5.736L55.587 5.616H54.171V3.36H56.195L56.739 4L57.355 3.36H60.467L62.219 5.112L60.475 6.808L59.371 5.624H58.459L57.971 6.112V9.752H59.523V12H54.155ZM55.099 10.984H58.579V10.76H56.947V5.504L57.819 4.632H59.987L60.627 5.352L60.787 5.208L60.067 4.408H57.747L56.827 5.328L55.979 4.408H55.099V4.632H55.883L56.723 5.552V10.76H55.099V10.984ZM64.0145 12V5.616H62.0225V3.36H64.0145V1.168H66.2785V3.36H68.2625V5.616H66.2785V9.736H68.2065V12H64.0145ZM65.0385 10.992H67.2145V10.768H65.2625V4.576H67.2705V4.352H65.2625V2.176H65.0385V4.352H63.0225V4.576H65.0385V10.992ZM72.9531 12V0.799999H79.2091L80.8571 2.448V5.304L80.1451 6.016L81.2171 7.096V10.352L79.5691 12H72.9531ZM74.0251 11.008H79.0171L80.2011 9.824V7.472L78.8731 6.144H78.5851L79.8171 4.912V2.912L78.6651 1.76H74.0251V11.008ZM74.2491 10.784V6.368H78.7931L79.9771 7.536V9.76L78.9371 10.784H74.2491ZM74.2491 6.144V1.984H78.5851L79.5931 2.976V4.848L78.2811 6.144H74.2491ZM75.2171 9.736H78.4651L78.9531 9.248V8.12L78.2491 7.416H75.2171V9.736ZM75.2171 5.152H77.8011L78.6011 4.36V3.552L78.1131 3.064H75.2171V5.152ZM83.8686 12L82.2206 10.352V5.008L83.8686 3.36H88.8686L90.5166 5.008V10.352L88.8686 12H83.8686ZM84.5086 10.992H88.3246L89.4926 9.824V5.536L88.3246 4.368H84.4446L83.2606 5.552V9.744L84.5086 10.992ZM84.5886 10.768L83.4846 9.68V5.616L84.5246 4.592H88.2446L89.2686 5.6V9.76L88.2446 10.768H84.5886ZM84.9726 9.736H87.7646L88.2526 9.248V6.112L87.7646 5.624H84.9726L84.4846 6.112V9.248L84.9726 9.736ZM93.1311 12L91.4831 10.352V8.072L93.1311 6.424H97.4831V6.112L96.9951 5.624H91.5951V3.36H98.0991L99.7471 5.008V10.352L98.0991 12H93.1311ZM93.7631 10.768L92.7391 9.76V8.552L93.6671 7.624H98.5951V9.68L97.4911 10.768H93.7631ZM93.6831 10.992H97.5711L98.8191 9.744V5.552L97.6351 4.368H92.6751V4.592H97.5551L98.5951 5.616V7.4H93.6031L92.5151 8.472V9.824L93.6831 10.992ZM94.2351 9.736H96.9951L97.4831 9.248V8.608H94.0751L93.7391 8.944V9.248L94.2351 9.736ZM100.714 12V9.744H102.266V5.736L102.146 5.616H100.73V3.36H102.754L103.298 4L103.914 3.36H107.026L108.778 5.112L107.034 6.808L105.93 5.624H105.018L104.53 6.112V9.752H106.082V12H100.714ZM101.658 10.984H105.138V10.76H103.506V5.504L104.378 4.632H106.546L107.186 5.352L107.346 5.208L106.626 4.408H104.306L103.386 5.328L102.538 4.408H101.658V4.632H102.442L103.282 5.552V10.76H101.658V10.984ZM115.254 12H110.758L109.102 10.352V5.008L110.758 3.36H114.486L114.646 3.512V-9.53674e-07H116.91V10.352L115.254 12ZM114.574 10.8H111.478L110.374 9.712V5.472L111.318 4.544H114.286L115.678 5.92V9.712L114.574 10.8ZM114.158 9.736L114.646 9.248V6.264L114.006 5.616H111.854L111.366 6.112V9.248L111.854 9.736H114.158ZM114.654 11.024L115.902 9.776V0.992H115.678V5.632L114.366 4.32H111.238L110.15 5.408V9.776L111.398 11.024H114.654Z" />
          </svg>
        </div>
        {selectedSize && (
          <SizeSelector
            selectedSize={selectedSize}
            setSelectedSize={setSelectedSize}
          />
        )}
        <div className={styles.canvas}>
          <ColorPicker
            currentColor={currentColor}
            setCurrentColor={setCurrentColor}
          />
          <PixelGrid currentColor={currentColor} selectedSize={selectedSize} />
        </div>
      </main>
    </div>
  );
}
